const form=document.querySelector(".library__form"),tbody=document.querySelector("tbody"),headerElement=document.getElementById("item__header"),authorElement=document.getElementById("item__author"),priorityElement=document.getElementById("item__priority"),categoryElement=document.getElementById("item__category"),elements=[headerElement,authorElement,priorityElement,categoryElement];let library;function createTable(e){var t=document.createElement("tr");t.insertAdjacentHTML("beforeend",`<td>${e.header}</td><td>${e.author}</td>\n  <td>${e.priority}</td><td>${e.category}</td>`),tbody.append(t),form.reset()}function checkForm(e,t){let r=[];return""===e&&r.push({input:"item__header",message:"Required field"}),t.length<3&&r.push({input:"item__author",message:"Field must contains at least 3 letters"}),0===priorityElement.selectedIndex&&r.push({input:"item__priority",message:"Choose priority"}),0===categoryElement.selectedIndex&&r.push({input:"item__category",message:"Choose category"}),r}document.addEventListener("DOMContentLoaded",(()=>{library=JSON.parse(localStorage.getItem("library"))||[],library.length>0&&library.forEach((e=>{createTable(e)}))})),form.addEventListener("submit",(e=>{e.preventDefault();const t=headerElement.value.trim(),r=authorElement.value.trim(),a={header:t,author:r,priority:priorityElement.value,category:categoryElement.value};elements.forEach((e=>{e.parentElement.classList.contains("error")&&(e.parentElement.classList.remove("error"),e.parentElement.removeAttribute("data-errormsg"))}));const n=checkForm(t,r);0===n.length?(createTable(a),library.push(a),localStorage.setItem("library",JSON.stringify(library))):n.forEach((e=>{let t=document.getElementById(e.input);t.parentElement.classList.add("error"),t.parentElement.setAttribute("data-errormsg",e.message)}))}));